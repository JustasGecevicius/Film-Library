import{A as p,K as S,r as c,u as b,o as g,T as E}from"./index-C-Mk1Gwc.js";import{u as i}from"./axios-f8QMfS4_.js";import{a as k}from"./api-CMss39_p.js";import{a as v}from"./api-Dvk17uGi.js";import{b as A}from"./api-DmGg8hiP.js";import{g as F}from"./api-zHsTOtF1.js";import{g as D}from"./api-CoIFmnul.js";const L=(t,r,e)=>{const s=[];return t.forEach(a=>{if(a.id.toLowerCase().includes(e)){const{profileURL:n,uid:o}=a.data();if(o===r)return;s.push({friendName:a.id,uid:o,profileURL:n})}}),s.length!==0?s:void 0},B=(t,r,e,s)=>{if(!e)return;const a=p(s,"friends",e.uid);S(a,{[r]:t})},y=(t,r)=>{if(!t)return;const e=[...t];return e.splice(r,1),e},I=()=>{const[t,r]=c.useState(!0);return c.useEffect(()=>{const e=document.getElementById("search"),s=a=>{if(e){const n=e.contains(a.target);r(!0),n||r(!1)}};return document.addEventListener("click",s,!1),()=>{document.removeEventListener("click",s)}},[]),t},K=(t,r,e,s)=>{const{userInfo:a,db:n}=b(),[o,u]=c.useState(),l=d(t,r);c.useEffect(()=>{t!==""&&h()},[l]);const h=async()=>{const f=await g(E(n,"userNames")),m=L(f,a==null?void 0:a.uid,t);u(m||void 0)};return c.useEffect(()=>{e!==-1&&(u(f=>y(f,e)),s(-1))},[e]),o},N=(t,r)=>{const e=d(t,r),{data:s}=i(["resultsMovie",e],()=>k(e));return s},R=(t,r)=>{const e=d(t,r),{data:s}=i(["resultsSeries",e],()=>v(e));return s},V=(t,r)=>{const e=d(t,r),{data:s}=i(["resultsPeople",e],()=>A(e));return s},$=()=>{const[t,r]=c.useState([]),{data:e}=i(["config"],F,{staleTime:3e5}),{data:s}=i(["popularData","movie",1],()=>D("movie"),{staleTime:3e5});return c.useEffect(()=>{if(!e||!s)return;const a=e.images.base_url+e.images.backdrop_sizes[3];Array.isArray(s)&&(s==null||s.forEach(n=>{n.backdrop_path&&r(o=>{const u=[...o];return u.push(`${a}${n.backdrop_path}`),u})}))},[e,s]),t};function d(t,r){const[e,s]=c.useState(t);return c.useEffect(()=>{const a=setTimeout(()=>{s(t)},r);return()=>{clearTimeout(a)}},[t,r]),e}export{N as a,R as b,I as c,K as d,V as e,B as h,$ as u};
