import{A as p,K as S,r as c,u as b,o as g,T as E}from"./index-SUciGbp2.js";import{u as i}from"./useQuery-BgrSdu3O.js";import{a as k}from"./api-CXCGK2c4.js";import{a as v}from"./api-im5uquK-.js";import{c as A,d as F}from"./api-C7sXjP99.js";import{g as D}from"./api-BZr6XhrH.js";const L=(t,r,e)=>{const s=[];return t.forEach(a=>{if(a.id.toLowerCase().includes(e)){const{profileURL:n,uid:o}=a.data();if(o===r)return;s.push({friendName:a.id,uid:o,profileURL:n})}}),s.length!==0?s:void 0},_=(t,r,e,s)=>{if(!e)return;const a=p(s,"friends",e.uid);S(a,{[r]:t})},y=(t,r)=>{if(!t)return;const e=[...t];return e.splice(r,1),e},B=()=>{const[t,r]=c.useState(!0);return c.useEffect(()=>{const e=document.getElementById("search"),s=a=>{if(e){const n=e.contains(a.target);r(!0),n||r(!1)}};return document.addEventListener("click",s,!1),()=>{document.removeEventListener("click",s)}},[]),t},I=(t,r,e,s)=>{const{userInfo:a,db:n}=b(),[o,u]=c.useState(),m=d(t,r);c.useEffect(()=>{t!==""&&h()},[m]);const h=async()=>{const f=await g(E(n,"userNames")),l=L(f,a==null?void 0:a.uid,t);u(l||void 0)};return c.useEffect(()=>{e!==-1&&(u(f=>y(f,e)),s(-1))},[e]),o},K=(t,r)=>{const e=d(t,r),{data:s}=i(["resultsMovie",e],()=>k(e));return s},N=(t,r)=>{const e=d(t,r),{data:s}=i(["resultsSeries",e],()=>v(e));return s},R=(t,r)=>{const e=d(t,r),{data:s}=i(["resultsPeople",e],()=>F(e));return s},V=()=>{const[t,r]=c.useState([]),{data:e}=i(["config"],A,{staleTime:3e5}),{data:s}=i(["popularData","movie",1],()=>D("movie"),{staleTime:3e5});return c.useEffect(()=>{if(!e||!s)return;const a=e.images.base_url+e.images.backdrop_sizes[3];Array.isArray(s)&&(s==null||s.forEach(n=>{n.backdrop_path&&r(o=>{const u=[...o];return u.push(`${a}${n.backdrop_path}`),u})}))},[e,s]),t};function d(t,r){const[e,s]=c.useState(t);return c.useEffect(()=>{const a=setTimeout(()=>{s(t)},r);return()=>{clearTimeout(a)}},[t,r]),e}export{K as a,N as b,B as c,I as d,R as e,_ as h,V as u};
