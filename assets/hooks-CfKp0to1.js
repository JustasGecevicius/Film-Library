import{r as m,u as C,h as k}from"./index-CASEKhqL.js";import{i as E,j as _}from"./hooks-DFcpSZ5H.js";import{u as b}from"./axios-fzcBKtAg.js";import{u as h}from"./firestore-Dg3MedE5.js";import{e as p}from"./hooks-D22SR9d5.js";const L=(e,r)=>{const i=[],u=e.images.base_url+e.images.poster_sizes[5];return r.forEach(a=>{if(!a)return;const{title:o,release_date:d,poster_path:s,id:n}=a,t=s?u+s:void 0;t&&i.push({title:o,release_date:d,imageURL:t,id:n})}),i},v=(e,r,i=1)=>{const[u,a]=m.useState(),{userInfo:o,db:d}=C(),{config:s}=p(),{data:n}=b(["credits",r,e],()=>k.includes(e)?_(r,e):new Promise(c=>c(null)),{enabled:!!r&&!!e}),{liked:t,rated:f}=h(d,e,o==null?void 0:o.uid);return m.useEffect(()=>{if(!s||!n)return;const c=L(s,n.cast.slice(0,19*i));if(!t||!f){a(c);return}const l=E(c,Object.keys(t),f);a(l)},[s,n,t,f,i]),u};export{v as u};
