import{r as u,u as m}from"./index-Bbsk2C5Q.js";import{i as l}from"./hooks-BKHs7KpM.js";import{f as k,a as A}from"./functions-Xf47q2pl.js";import{u as S}from"./functions-a3rltZny.js";import{g as v}from"./api-Cf9d3est.js";import{u as P}from"./firestore-DcfGZEYH.js";import{e as _}from"./hooks-0AK4mnPM.js";import{a as T}from"./api-Da6TUB6i.js";const E=t=>{const[p,i]=u.useState(),{userInfo:a,db:f}=m(),{config:r}=_(),{data:{pages:n}={},fetchNextPage:g}=S(["popularData",t],({pageParam:e})=>v(t,e,!0),{getNextPageParam:e=>!Array.isArray(e)&&e.total_pages>e.page?e.page+1:void 0}),{liked:o,rated:s}=P(f,t,a==null?void 0:a.uid);return u.useEffect(()=>{if(!r||!n)return;const e=n.flatMap(({results:d})=>d),c=t==="movie"?k(r,e):A(r,e);if(!o||!s)i(c);else if(o&&s){const d=l(c,Object.keys(o),s);i(d)}},[r,n,o,s,t]),{results:p,fetchNextPage:g}},N=async(t,p=1,i)=>await T(t==="movie"?`/movie/top_rated?api_key=ZAZA&language=en-US&page=${p}`:`/tv/top_rated?api_key=ZAZA&language=en-US&page=${p}`).then(({data:a})=>i?a:a.results),h=t=>{const[p,i]=u.useState(),{userInfo:a,db:f}=m(),{config:r}=_(),{data:{pages:n}={},fetchNextPage:g}=S(["topData",t],({pageParam:e=1})=>N(t,e,!0),{getNextPageParam:e=>!Array.isArray(e)&&e.total_pages>e.page?e.page+1:void 0}),{liked:o,rated:s}=P(f,t,a==null?void 0:a.uid);return u.useEffect(()=>{if(!r||!n)return;const e=n.flatMap(({results:d})=>d),c=t==="movie"?k(r,e):A(r,e);if(!o||!s)i(c);else if(o&&s){const d=l(c,Object.keys(o),s);i(d)}},[r,n,o,s]),{results:p,fetchNextPage:g}},Z={top:"Top",popular:"Popular",recommended:"Recommended",liked:"Liked",rated:"Rated",popular_friends:"Popular With Friends",rated_friends:"Rated by Friends",credits:"Credits"},$={movie:"Movies",series:"Series",people:"people"},I={popular:E,top:h};export{I as H,Z as S,$ as T,h as a,E as u};
